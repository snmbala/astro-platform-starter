---
import Layout from '../../layouts/Layout.astro';
import type { GetStaticPaths } from 'astro';

export const getStaticPaths = (async () => {
  const posts = await Astro.glob('../../content/blog/*.md');
  
  return posts.map((post) => {
    const slug = post.file.split('/').pop()?.replace('.md', '') || '';
    return {
      params: { slug },
      props: { post }
    };
  });
}) satisfies GetStaticPaths;

const { post } = Astro.props;
const { Content, frontmatter } = post;
---

<Layout title={frontmatter.title}>
  <article class="max-w-3xl mx-auto px-4 py-12">
    <header class="mb-8">
      <h1 class="text-4xl font-bold mb-4">{frontmatter.title}</h1>
      
      <div class="text-gray-600 mb-4">
        <time datetime={frontmatter.publishDate}>
          {new Date(frontmatter.publishDate).toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          })}
        </time>
        {frontmatter.author && (
          <span> • {frontmatter.author}</span>
        )}
      </div>
      
      {frontmatter.tags && (
        <div class="flex gap-2 mb-6">
          {frontmatter.tags.map((tag: string) => (
            <span class="text-sm bg-gray-200 px-3 py-1 rounded">
              {tag}
            </span>
          ))}
        </div>
      )}
      
      {frontmatter.description && (
        <p class="text-xl text-gray-700 border-l-4 border-blue-500 pl-4 italic">
          {frontmatter.description}
        </p>
      )}
    </header>
    
    <div class="prose prose-lg max-w-none">
      <Content />
    </div>
    
    <footer class="mt-12 pt-8 border-t border-gray-200">
      <a href="/blog" class="text-blue-600 hover:underline">
        ← Back to all posts
      </a>
    </footer>
  </article>
</Layout>
